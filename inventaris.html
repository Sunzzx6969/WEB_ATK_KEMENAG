<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Inventaris ATK - SIPEKAT</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f0f4f2;
      font-family: 'Segoe UI', sans-serif;
    }
    .navbar {
      background-color: #176A4D;
      height: 80px;
      align-items: center;
    }
    .logout-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      background-color: white;
      color: #0F4C3A;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      z-index: 99;
    }
    .container-box {
      background: white;
      border-radius: 10px;
      padding: 30px;
      margin-top: 30px;
    }
    .search-box {
      position: relative;
      margin-bottom: 25px;
    }
    .search-box input {
      padding-left: 40px;
      border-radius: 10px;
    }
    .search-box i {
      position: absolute;
      top: 50%;
      left: 15px;
      transform: translateY(-50%);
      color: #aaa;
    }
    .status-aman {
      background-color: #e1f5ec;
      color: #2d8659;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 13px;
    }
    .status-habis {
      background-color: #ffecec;
      color: #d20000;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 13px;
    }
    .status-menipis {
      background-color: #fff6e0;
      color: #d48a00;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 13px;
    }
    thead {
      background-color: #176A4D;
      color: white;
    }
    .btn-green {
      background-color: #176A4D;
      color: white;
      border-radius: 8px;
      padding: 6px 12px;
      font-size: 13px;
      border: none;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid px-4">
      <button class="logout-btn" onclick="window.location.href='dashboard-admin.html'">Keluar</button>
      <div class="mx-auto text-white fw-semibold">Inventaris Alat Tulis Kantor</div>
    </div>
  </nav>

  <!-- Konten -->
  <div class="container container-box mt-4">
    <div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
      <div>
        <h5 class="fw-semibold text-success">Daftar Inventaris ATK</h5>
        <p class="text-muted">Berikut daftar inventaris alat tulis kantor yang tersedia saat ini.</p>
      </div>
      <div>
        <button class="btn-green" data-bs-toggle="modal" data-bs-target="#tambahBarangModal">+ Tambah Barang</button>
      </div>
    </div>

    <!-- Pencarian -->
    <div class="search-box">
      <i class="bi bi-search"></i>
      <input type="text" id="searchInput" class="form-control" placeholder="Cari nama barang...">
    </div>

    <!-- Tabel Inventaris -->
    <div class="table-responsive">
      <table class="table table-bordered align-middle" id="inventarisTable">
        <thead>
          <tr>
            <th>No</th>
            <th>Jenis ATK</th>
            <th>Jumlah Stok</th>
            <th>Satuan</th>
            <th>Status</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody>
          <!-- Data awal kosong, nanti ditambah -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Modal Tambah Barang -->
  <div class="modal fade" id="tambahBarangModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content rounded-4 shadow">
        <div class="modal-header border-0 pb-0">
          <h5 class="modal-title">Tambah Barang Baru</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Tutup"></button>
        </div>
        <div class="modal-body pt-0">
          <form id="formTambahBarang">
            <div class="mb-3">
              <label class="form-label">Jenis Barang</label>
              <input type="text" class="form-control" id="namaBarang" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Jumlah Stok</label>
              <input type="number" class="form-control" id="jumlahBarang" min="0" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Satuan</label>
              <select class="form-select" id="satuanBarang" required>
                <option value="" disabled selected>Pilih Satuan</option>
                <option>Pcs</option>
                <option>Rim</option>
                <option>Unit</option>
                <option>Box</option>
                <option>Pack</option>
              </select>
            </div>
            <button type="submit" class="btn-green w-100">Simpan</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS + Icons -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

  <script>
    const tableBody = document.querySelector('#inventarisTable tbody');

    // Fungsi update status stok
    function getStatus(stok) {
      if (stok == 0) return '<span class="status-habis">Habis</span>';
      if (stok <= 50) return '<span class="status-menipis">Menipis</span>';
      return '<span class="status-aman">Stok Aman</span>';
    }

    // Tambah barang baru
    document.getElementById('formTambahBarang').addEventListener('submit', function(e) {
      e.preventDefault();

      const nama = document.getElementById('namaBarang').value;
      const jumlah = parseInt(document.getElementById('jumlahBarang').value);
      const satuan = document.getElementById('satuanBarang').value;

      if (!nama || isNaN(jumlah) || !satuan) return;

      const rowCount = tableBody.rows.length + 1;
      const row = tableBody.insertRow();

      row.innerHTML = `
        <td>${rowCount}</td>
        <td>${nama}</td>
        <td class="stok">${jumlah}</td>
        <td>${satuan}</td>
        <td class="status">${getStatus(jumlah)}</td>
        <td><button class="btn-green btn-sm tambah-btn">Tambah Stok</button></td>
      `;

      // Event untuk tombol Tambah Stok
      row.querySelector('.tambah-btn').addEventListener('click', function() {
        const stokCell = row.querySelector('.stok');
        let stok = parseInt(stokCell.innerText);
        const jumlahTambah = prompt('Masukkan jumlah tambahan stok untuk ' + nama + ':');
        if (jumlahTambah && !isNaN(jumlahTambah) && jumlahTambah > 0) {
          stok += parseInt(jumlahTambah);
          stokCell.innerText = stok;
          row.querySelector('.status').innerHTML = getStatus(stok);
        }
      });

      document.getElementById('formTambahBarang').reset();
      bootstrap.Modal.getInstance(document.getElementById('tambahBarangModal')).hide();
    });

    // Filter pencarian
    document.getElementById('searchInput').addEventListener('keyup', function() {
      const keyword = this.value.toLowerCase();
      document.querySelectorAll('#inventarisTable tbody tr').forEach(row => {
        const text = row.cells[1].innerText.toLowerCase();
        row.style.display = text.includes(keyword) ? '' : 'none';
      });
    });
  </script>
</body>
</html>
